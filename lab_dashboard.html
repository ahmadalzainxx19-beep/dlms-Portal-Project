<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة التحكم - بوابة الطالب</title>

    <!-- Libraries -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Alexandria:wght@100..900&display=swap" rel="stylesheet">


    <style>
        /* Custom Font Setup matching Login Page */
        @font-face {
            font-family: 'YearOfTheCamel';
            src: local('The Year of The Camel'), local('YearOfTheCamel');
        }

        /* Unified CSS Variables (Login Palette) */
        :root {
            /* Primary Palette */
            --color-primary: #055934;
            /* Deep Green */
            --color-primary-light: #208D44;
            /* Medium Green */
            --color-accent: #86C242;
            /* Lime Green */
            --color-border: #D3E6BE;
            /* Pale Green */
            --color-bg-warm: #F0EEE9;
            /* Off-white */

            /* Secondary Palette */
            --color-text-dark: #0A353E;
            /* Dark Teal */
            --color-success: #2BB673;
            /* Vibrant Green */
            --color-hover: #A7E0C5;
            /* Mint Green */
            --color-bg-cool: #EFF8F5;
            /* Light Mint */
            --bg-card: #FFFFFF;
        }

        .dark {
            /* Dark Mode Overrides (Optional, keeping consistent if dark mode is requested later, but matching login logic) */
            --color-primary: #6BBF5E;
            --color-accent: #FFC95F;
            --bg-sidebar: #173C2F;
            --bg-card: #334155;
            --text-base: #E2E8F0;
            --border-color: #475569;
        }

        /* Base Styles */
        body {
            font-family: 'YearOfTheCamel', 'Alexandria', sans-serif;
            background-color: var(--color-bg-warm);
            color: var(--color-text-dark);
            transition: all 0.3s ease;
            letter-spacing: 0.025em;
            /* tracking-wide */
            line-height: 1.625;
            /* leading-relaxed */
        }

        /* Sidebar */
        .sidebar {
            background-color: var(--color-primary);
            color: white;
            transition: width 0.3s;
        }

        /* Header */
        .header-icon-hover {
            transition: background-color 0.2s, color 0.2s;
            padding: 0.5rem;
            border-radius: 50%;
            color: var(--color-primary);
        }

        .header-icon-hover:hover {
            background-color: var(--color-bg-cool);
            color: var(--color-primary-light);
        }

        /* Cards & Tables */
        .card {
            background-color: var(--bg-card);
            border: 1px solid var(--color-border);
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(5, 89, 52, 0.05);
        }

        .table-row {
            background-color: var(--bg-card);
            border-bottom: 1px solid var(--color-border);
            transition: background-color 0.15s;
        }

        .table-row:hover {
            background-color: var(--color-bg-cool);
        }

        .border-custom {
            border-color: var(--color-border);
        }

        /* Utility */
        .text-accent {
            color: var(--color-accent);
        }

        .bg-primary {
            background-color: var(--color-primary);
        }

        /* Glass effect for modal similar to login */
        .swal2-popup {
            border-radius: 1rem !important;
            font-family: 'Alexandria', sans-serif !important;
        }

        /* Custom Scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }
    </style>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            deep: '#055934',
                            medium: '#208D44',
                            light: '#86C242',
                            pale: '#D3E6BE',
                            warm: '#F0EEE9',
                            dark: '#0A353E',
                            mint: '#A7E0C5',
                            cool: '#EFF8F5'
                        }
                    },
                    fontFamily: {
                        sans: ['YearOfTheCamel', 'Alexandria', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>

<body class="flex h-screen overflow-hidden">

    <!-- Sidebar -->
    <!-- Hidden on mobile, fixed on desktop -->
    <aside id="sidebar"
        class="sidebar fixed inset-y-0 right-0 z-50 w-64 transform transition-transform duration-300 translate-x-full lg:translate-x-0 lg:static lg:inset-auto rtl:border-l ltr:border-r border-brand-pale shadow-xl flex flex-col justify-between">

        <!-- Top Section: Logo & Student Info -->
        <div class="flex flex-col h-full">
            <!-- Logo -->
            <div class="flex items-center justify-center p-6 border-b border-white/10 flex-shrink-0">
                <i data-feather="book-open" class="w-8 h-8 text-white mr-2 ml-2"></i>
                <span class="text-xl font-bold text-white tracking-wide" data-ar="بوابة الطالب"
                    data-en="Student Portal">بوابة الطالب</span>
            </div>

            <!-- Student Detailed Info (Sidebar) -->
            <div class="p-6 flex-1 overflow-y-auto custom-scrollbar">

                <!-- Profile Image & Name -->
                <div class="flex flex-col items-center text-center mb-6">
                    <div
                        class="w-24 h-24 rounded-2xl bg-white p-1 shadow-lg mb-4 transform rotate-1 hover:rotate-0 transition-transform duration-300">
                        <img src="https://images.unsplash.com/photo-1599566150163-29194dcaad36?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80"
                            alt="Student" class="w-full h-full object-cover rounded-xl filter">
                    </div>
                    <h2 class="text-lg font-bold text-white mb-1 leading-tight" data-ar="أحمد محمد علي"
                        data-en="Ahmed Mohammed Ali">أحمد محمد علي</h2>
                    <div class="px-3 py-1 bg-white/10 rounded-lg border border-white/10 mt-2">
                        <span class="text-[10px] text-white/60 block font-bold mb-0.5" data-ar="الرقم الجامعي"
                            data-en="Student ID">الرقم الجامعي</span>
                        <span class="text-lg font-mono font-bold text-white tracking-widest">4410123</span>
                    </div>
                </div>

                <!-- Details List -->
                <div class="space-y-4">
                    <!-- College -->
                    <div class="bg-white/5 rounded-xl p-3 border border-white/5 hover:bg-white/10 transition-colors">
                        <div class="flex items-center gap-3 mb-1">
                            <i data-feather="book" class="w-4 h-4 text-brand-accent"></i>
                            <span class="text-[10px] uppercase tracking-wide text-white/50 font-bold" data-ar="الكلية"
                                data-en="College">الكلية</span>
                        </div>
                        <p class="text-sm font-semibold text-white/90 leading-tight" data-ar="الحاسبات وتقنية المعلومات"
                            data-en="Computing & IT">الحاسبات وتقنية المعلومات</p>
                    </div>

                    <!-- Major -->
                    <div class="bg-white/5 rounded-xl p-3 border border-white/5 hover:bg-white/10 transition-colors">
                        <div class="flex items-center gap-3 mb-1">
                            <i data-feather="layers" class="w-4 h-4 text-brand-accent"></i>
                            <span class="text-[10px] uppercase tracking-wide text-white/50 font-bold" data-ar="التخصص"
                                data-en="Major">التخصص</span>
                        </div>
                        <p class="text-sm font-semibold text-white/90 leading-tight" data-ar="علوم كيمياء (فرعي)"
                            data-en="Chemistry Science">علوم كيمياء (فرعي)</p>
                    </div>

                    <!-- Status -->
                    <div class="bg-white/5 rounded-xl p-3 border border-white/5 hover:bg-white/10 transition-colors">
                        <div class="flex items-center gap-3 mb-1">
                            <i data-feather="check-circle" class="w-4 h-4 text-brand-success"></i>
                            <span class="text-[10px] uppercase tracking-wide text-white/50 font-bold"
                                data-ar="الحالة الأكاديمية" data-en="Status">الحالة الأكاديمية</span>
                        </div>
                        <p class="text-sm font-semibold text-brand-success leading-tight" data-ar="منتظم"
                            data-en="Active">منتظم</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- Footer Section (Only Logout + Copyright) -->
        <div class="w-full p-4 border-t border-white/10">
            <!-- Copyright Footer integrated into Sidebar -->
            <div class="text-center mt-2 mb-4">
                <p class="text-[10px] text-white/40" data-ar="© 2026 جامعة الملك عبدالعزيز"
                    data-en="© 2026 King Abdulaziz University">© 2026 جامعة الملك عبدالعزيز</p>
            </div>

            <button onclick="logout()"
                class="w-full flex items-center justify-center p-3 text-sm text-red-100 hover:bg-white/10 rounded-xl transition-colors group border border-transparent hover:border-white/10">
                <i data-feather="log-out" class="w-4 h-4 ml-2 rtl:ml-2 ltr:mr-2"></i>
                <span data-ar="تسجيل الخروج" data-en="Logout">تسجيل الخروج</span>
            </button>
        </div>
    </aside>

    <!-- Main Content Wrapper -->
    <div class="relative flex flex-col flex-1 overflow-hidden bg-brand-warm/50">

        <!-- Header -->
        <!-- Header Removed -->

        <!-- Content -->
        <main class="flex-1 p-4 lg:p-8 overflow-y-auto">

            <!-- Student Info Card Removed (Moved to Sidebar) -->
            <!-- Filter Section Removed -->

            <!-- Exams Table -->
            <div class="card shadow-sm overflow-hidden bg-white">
                <div class="p-5 border-b border-brand-pale flex justify-between items-center bg-brand-cool/30">
                    <h3 class="font-bold text-lg text-brand-deep" data-ar="الاختبارات القادمة" data-en="Upcoming Exams">
                        الاختبارات القادمة</h3>
                    <span
                        class="text-xs font-bold bg-brand-pale/50 text-brand-dark px-3 py-1 rounded-full border border-brand-pale"
                        data-ar="الفصل الدراسي الأول 2026" data-en="First Semester 2026">الفصل الدراسي الأول 2026</span>
                </div>

                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-right text-brand-dark">
                        <thead class="text-xs text-brand-deep/70 uppercase bg-brand-cool/50 font-bold">
                            <tr>
                                <th scope="col" class="px-6 py-4" data-ar="اسم الاختبار" data-en="Exam Name">اسم
                                    الاختبار</th>
                                <th scope="col" class="px-6 py-4" data-ar="النظام" data-en="System">النظام</th>
                                <th scope="col" class="px-6 py-4" data-ar="التاريخ والوقت" data-en="Date & Time">التاريخ
                                    والوقت</th>
                                <th scope="col" class="px-6 py-4" data-ar="الحالة" data-en="Status">الحالة</th>
                                <th scope="col" class="px-6 py-4" data-ar="الإجراء" data-en="Action">الإجراء</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-brand-pale font-medium">
                            <!-- Row 1 -->
                            <tr class="table-row group hover:bg-brand-cool transiton-colors">
                                <td class="px-6 py-5 text-brand-dark font-bold font-sans">
                                    CS-101 Introduction to CS
                                </td>
                                <td class="px-6 py-5">
                                    <span
                                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-50 text-blue-700 border border-blue-100">
                                        QuestionMark
                                    </span>
                                </td>
                                <td class="px-6 py-5">
                                    <div class="flex flex-col font-sans">
                                        <span class="text-brand-dark">2026-02-15</span>
                                        <span class="text-xs text-brand-dark/50">10:00 AM</span>
                                    </div>
                                </td>
                                <td class="px-6 py-5">
                                    <span class="text-brand-success font-bold flex items-center gap-1">
                                        <span class="w-1.5 h-1.5 rounded-full bg-brand-success"></span>
                                        <span data-ar="متاح" data-en="Available">متاح</span>
                                    </span>
                                </td>
                                <td class="px-6 py-5">
                                    <button onclick="startExam('CS-101')"
                                        class="text-white bg-brand-light hover:bg-brand-medium font-bold rounded-lg text-xs px-4 py-2 transition-all shadow-sm transform hover:-translate-y-0.5">
                                        <span data-ar="بدء الاختبار" data-en="Start Exam">بدء الاختبار</span>
                                    </button>
                                </td>
                            </tr>

                            <!-- Row 2 -->
                            <tr class="table-row group hover:bg-brand-cool transiton-colors">
                                <td class="px-6 py-5 text-brand-dark font-bold font-sans">
                                    MATH-202 Calculus II
                                </td>
                                <td class="px-6 py-5">
                                    <span
                                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-purple-50 text-purple-700 border border-purple-100">
                                        Blackboard
                                    </span>
                                </td>
                                <td class="px-6 py-5">
                                    <div class="flex flex-col font-sans">
                                        <span class="text-brand-dark">2026-02-20</span>
                                        <span class="text-xs text-brand-dark/50">01:00 PM</span>
                                    </div>
                                </td>
                                <td class="px-6 py-5">
                                    <span class="text-brand-dark/50 font-medium" data-ar="لم يحن الموعد"
                                        data-en="Upcoming">لم يحن الموعد</span>
                                </td>
                                <td class="px-6 py-5">
                                    <button disabled
                                        class="text-white bg-gray-300 cursor-not-allowed font-medium rounded-lg text-xs px-4 py-2 opacity-70">
                                        <span data-ar="بدء الاختبار" data-en="Start Exam">بدء الاختبار</span>
                                    </button>
                                </td>
                            </tr>

                            <!-- Row 3 -->
                            <tr class="table-row group hover:bg-brand-cool transiton-colors">
                                <td class="px-6 py-5 text-brand-dark font-bold font-sans">
                                    PHY-105 General Physics
                                </td>
                                <td class="px-6 py-5">
                                    <span
                                        class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-blue-50 text-blue-700 border border-blue-100">
                                        QuestionMark
                                    </span>
                                </td>
                                <td class="px-6 py-5">
                                    <div class="flex flex-col font-sans">
                                        <span class="text-brand-dark">2026-02-10</span>
                                        <span class="text-xs text-brand-dark/50">09:00 AM</span>
                                    </div>
                                </td>
                                <td class="px-6 py-5">
                                    <span class="text-red-500 font-bold" data-ar="منتهي" data-en="Expired">منتهي</span>
                                </td>
                                <td class="px-6 py-5">
                                    <button disabled
                                        class="text-white bg-gray-300 cursor-not-allowed font-medium rounded-lg text-xs px-4 py-2 opacity-70">
                                        <span data-ar="عرض النتائج" data-en="View Results">عرض النتائج</span>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </main>
    </div>

    <!-- Scripts -->
    <script>
        // Initialize Icons
        feather.replace();

        // Initialize Flatpickr
        flatpickr("#date-filter", {
            dateFormat: "Y-m-d",
            locale: "ar", // Default to Arabic
            disableMobile: "true"
        });

        flatpickr("#time-filter", {
            enableTime: true,
            noCalendar: true,
            dateFormat: "H:i",
            time_24hr: true,
            disableMobile: "true"
        });

        // Global State
        let currentLang = 'ar';
        let isSidebarOpen = false;

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            isSidebarOpen = !isSidebarOpen;

            if (isSidebarOpen) {
                sidebar.classList.remove('translate-x-full'); // Show
            } else {
                sidebar.classList.add('translate-x-full'); // Hide
            }
        }

        function toggleLang() {
            currentLang = currentLang === 'ar' ? 'en' : 'ar';
            document.documentElement.lang = currentLang;
            document.documentElement.dir = currentLang === 'ar' ? 'rtl' : 'ltr';

            // Text Updates
            document.querySelectorAll('[data-ar]').forEach(el => {
                el.textContent = currentLang === 'ar' ? el.dataset.ar : el.dataset.en;
            });

            // Button Text
            document.getElementById('lang-btn-text').textContent = currentLang === 'ar' ? 'English' : 'العربية';

            // Sidebar specifics (LTR/RTL Margin Swaps for icons)
            // Note: Feather icons handles direction or we handled it via classes rtl:ml-3

            // Rotate Arrows if any
            const arrows = document.querySelectorAll('.feather-arrow-left');
            if (currentLang === 'en') {
                arrows.forEach(a => a.style.transform = 'rotate(180deg)');
            } else {
                arrows.forEach(a => a.style.transform = 'rotate(0deg)');
            }
        }

        function applyFilter() {
            Swal.fire({
                title: `<span style="font-family: 'Alexandria', sans-serif; color: #055934">${currentLang === 'ar' ? 'جاري التحديث' : 'Updating'}</span>`,
                text: currentLang === 'ar' ? 'يتم تصفية البيانات...' : 'Filtering data...',
                icon: 'info',
                iconColor: '#208D44',
                timer: 1000,
                showConfirmButton: false,
                customClass: {
                    popup: 'rounded-2xl',
                }
            });
        }

        function startExam(examName) {
            Swal.fire({
                title: `<span style="font-family: 'Alexandria', sans-serif; color: #055934">${currentLang === 'ar' ? 'تأكيد دخول الاختبار' : 'Confirm Entry'}</span>`,
                text: `${currentLang === 'ar' ? 'هل أنت متأكد من البدء في' : 'Are you sure you want to start'} ${examName}?`,
                icon: 'warning',
                iconColor: '#C89933', // Accent as warning
                showCancelButton: true,
                confirmButtonColor: '#055934',
                cancelButtonColor: '#d33',
                confirmButtonText: currentLang === 'ar' ? 'نعم، ابدأ' : 'Yes, Start',
                cancelButtonText: currentLang === 'ar' ? 'إلغاء' : 'Cancel',
                customClass: {
                    popup: 'rounded-2xl',
                    confirmButton: 'rounded-lg px-6 py-2.5 font-bold',
                    cancelButton: 'rounded-lg px-6 py-2.5'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: `<span style="font-family: 'Alexandria', sans-serif; color: #055934">${currentLang === 'ar' ? 'جاري الفتح...' : 'Opening...'}</span>`,
                        text: 'Redirecting to Exam Engine.',
                        icon: 'success',
                        iconColor: '#2BB673',
                        timer: 1500,
                        showConfirmButton: false,
                        customClass: {
                            popup: 'rounded-2xl',
                        }
                    });
                }
            })
        }

        function logout() {
            Swal.fire({
                title: `<span style="font-family: 'Alexandria', sans-serif; color: #055934">${currentLang === 'ar' ? 'تسجيل الخروج' : 'Logout'}</span>`,
                text: currentLang === 'ar' ? 'هل أنت متأكد؟' : 'Are you sure?',
                icon: 'question',
                iconColor: '#055934',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                confirmButtonText: currentLang === 'ar' ? 'خروج' : 'Logout',
                cancelButtonText: currentLang === 'ar' ? 'إلغاء' : 'Cancel',
                customClass: {
                    popup: 'rounded-2xl',
                    confirmButton: 'rounded-lg px-6 py-2.5 font-bold',
                    cancelButton: 'rounded-lg px-6 py-2.5'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    window.location.href = 'lab_login.html';
                }
            });
        }
    </script>
</body>

</html>